!function(e){function t(e){var t=e.originalEvent.changedTouches,a=t[0],i="";switch(e.type){case"touchmove":i="mousemove";break;case"touchend":i="mouseup";break;default:return}var r=document.createEvent("MouseEvent");r.initMouseEvent(i,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(r),e.preventDefault()}e.rateit={aria:{resetLabel:"reset rating",ratingLabel:"rating"}},e.fn.rateit=function(a,r){var n=1,s={},l="init",d=function(e){return e.charAt(0).toUpperCase()+e.substr(1)};if(0===this.length)return this;var o=e.type(a);if("object"==o||void 0===a||null===a)s=e.extend({},e.fn.rateit.defaults,a);else{if("string"==o&&"reset"!==a&&void 0===r)return this.data("rateit"+d(a));"string"==o&&(l="setvalue")}return this.each(function(){var o=e(this),h=function(e,t){if(null!=t){var a="aria-value"+("value"==e?"now":e),i=o.find(".rateit-range");void 0!=i.attr(a)&&i.attr(a,t)}return arguments[0]="rateit"+d(e),o.data.apply(o,arguments)};if("reset"==a){var u=h("init");for(var v in u)o.data(v,u[v]);if(h("backingfld")){var m=e(h("backingfld"));m.val(h("value")),m.trigger("change"),m[0].min&&(m[0].min=h("min")),m[0].max&&(m[0].max=h("max")),m[0].step&&(m[0].step=h("step"))}o.trigger("reset")}o.hasClass("rateit")||o.addClass("rateit");var c="rtl"!=o.css("direction");if("setvalue"==l){if(!h("init"))throw"Can't set value before init";if("readonly"!=a||1!=r||h("readonly")||(o.find(".rateit-range").unbind(),h("wired",!1)),"value"==a&&(r=null==r?h("min"):Math.max(h("min"),Math.min(h("max"),r))),h("backingfld")){var m=e(h("backingfld"));"value"==a&&m.val(r),"min"==a&&m[0].min&&(m[0].min=r),"max"==a&&m[0].max&&(m[0].max=r),"step"==a&&m[0].step&&(m[0].step=r)}h(a,r)}if(!h("init")){if(h("min",isNaN(h("min"))?s.min:h("min")),h("max",isNaN(h("max"))?s.max:h("max")),h("step",h("step")||s.step),h("readonly",void 0!==h("readonly")?h("readonly"):s.readonly),h("resetable",void 0!==h("resetable")?h("resetable"):s.resetable),h("backingfld",h("backingfld")||s.backingfld),h("starwidth",h("starwidth")||s.starwidth),h("starheight",h("starheight")||s.starheight),h("value",Math.max(h("min"),Math.min(h("max"),isNaN(h("value"))?isNaN(s.value)?s.min:s.value:h("value")))),h("ispreset",void 0!==h("ispreset")?h("ispreset"):s.ispreset),h("backingfld")){var m=e(h("backingfld")).hide();if((m.attr("disabled")||m.attr("readonly"))&&h("readonly",!0),"INPUT"==m[0].nodeName&&("range"==m[0].type||"text"==m[0].type)&&(h("min",parseInt(m.attr("min"))||h("min")),h("max",parseInt(m.attr("max"))||h("max")),h("step",parseInt(m.attr("step"))||h("step"))),"SELECT"==m[0].nodeName&&m[0].options.length>1){h("min",isNaN(h("min"))?Number(m[0].options[0].value):h("min")),h("max",Number(m[0].options[m[0].length-1].value)),h("step",Number(m[0].options[1].value)-Number(m[0].options[0].value));var g=m.find("option[selected]");1==g.length&&h("value",g.val())}else h("value",m.val())}var f="DIV"==o[0].nodeName?"div":"span";if(n++,1==h("icon")){var p=h("max")-h("min"),b="";for(i=0;p>i;i++)b+="<i class='fa fa-circle' style='display: inline-block; margin-left: 3.5px;'></i>";var x='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+e.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"><i class="fa fa-minus-circle"></i></button><{{element}} id="rateit-range-{{index}}" class="rateit-range" tabindex="0" role="slider" aria-label="'+e.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+h("min")+'" aria-valuemax="'+h("max")+'" aria-valuenow="'+h("value")+'">'+b+'<{{element}} class="rateit-selected" style="height:'+h("starheight")+'px">'+b+'</{{element}}><{{element}} class="rateit-hover" style="height:'+h("starheight")+'px">'+b+"</{{element}}></{{element}}>"}else var x='<button id="rateit-reset-{{index}}" type="button" data-role="none" class="rateit-reset" aria-label="'+e.rateit.aria.resetLabel+'" aria-controls="rateit-range-{{index}}"></button><{{element}} id="rateit-range-{{index}}" class="rateit-range" tabindex="0" role="slider" aria-label="'+e.rateit.aria.ratingLabel+'" aria-owns="rateit-reset-{{index}}" aria-valuemin="'+h("min")+'" aria-valuemax="'+h("max")+'" aria-valuenow="'+h("value")+'"><{{element}} class="rateit-selected" style="height:'+h("starheight")+'px"></{{element}}><{{element}} class="rateit-hover" style="height:'+h("starheight")+'px"></{{element}}></{{element}}>';o.append(x.replace(/{{index}}/gi,n).replace(/{{element}}/gi,f)),c||(o.find(".rateit-reset").css("float","right"),o.find(".rateit-selected").addClass("rateit-selected-rtl"),o.find(".rateit-hover").addClass("rateit-hover-rtl")),h("init",JSON.parse(JSON.stringify(o.data())))}o.find(".rateit-selected, .rateit-hover").height(h("starheight"));var w=o.find(".rateit-range");w.width(h("starwidth")*(h("max")-h("min"))).height(h("starheight"));var y="rateit-preset"+(c?"":"-rtl");if(h("ispreset")?o.find(".rateit-selected").addClass(y):o.find(".rateit-selected").removeClass(y),null!=h("value")){var N=(h("value")-h("min"))*h("starwidth");o.find(".rateit-selected").width(N)}var k=o.find(".rateit-reset");k.data("wired")!==!0&&k.bind("click",function(t){t.preventDefault(),k.blur();var a=e.Event("beforereset");return o.trigger(a),a.isDefaultPrevented()?!1:(o.rateit("value",null),void o.trigger("reset"))}).data("wired",!0);var C=function(t,a){var i=a.changedTouches?a.changedTouches[0].pageX:a.pageX,r=i-e(t).offset().left;return c||(r=w.width()-r),r>w.width()&&(r=w.width()),0>r&&(r=0),N=Math.ceil(r/h("starwidth")*(1/h("step")))},E=function(e){var t=e*h("starwidth")*h("step"),a=w.find(".rateit-hover");if(a.data("width")!=t){w.find(".rateit-selected").hide(),a.width(t).show().data("width",t);var i=[e*h("step")+h("min")];o.trigger("hover",i).trigger("over",i)}},M=function(t){var a=e.Event("beforerated");return o.trigger(a,[t]),a.isDefaultPrevented()?!1:(h("value",t),h("backingfld")&&e(h("backingfld")).val(t).trigger("change"),h("ispreset")&&(w.find(".rateit-selected").removeClass(y),h("ispreset",!1)),w.find(".rateit-hover").hide(),w.find(".rateit-selected").width(t*h("starwidth")-h("min")*h("starwidth")).show(),o.trigger("hover",[null]).trigger("over",[null]).trigger("rated",[t]),!0)};h("readonly")?k.hide():(h("resetable")||k.hide(),h("wired")||(w.bind("touchmove touchend",t),w.mousemove(function(e){var t=C(this,e);E(t)}),w.mouseleave(function(){w.find(".rateit-hover").hide().width(0).data("width",""),o.trigger("hover",[null]).trigger("over",[null]),w.find(".rateit-selected").show()}),w.mouseup(function(e){var t=C(this,e),a=t*h("step")+h("min");M(a),w.blur()}),w.keyup(function(e){(38==e.which||e.which==(c?39:37))&&M(Math.min(h("value")+h("step"),h("max"))),(40==e.which||e.which==(c?37:39))&&M(Math.max(h("value")-h("step"),h("min")))}),h("wired",!0)),h("resetable")&&k.show()),w.attr("aria-readonly",h("readonly"))})},e.fn.rateit.defaults={min:0,max:5,step:.5,starwidth:18,starheight:18,readonly:!1,resetable:!0,ispreset:!1},e(function(){e("div.rateit, span.rateit").rateit()})}(jQuery);
