//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//  (c) 2010-present DEMOS plan GmbH.
//
//  This file is part of the package demosplan,
//  for more information see the license file.
//
//  All rights reserved
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//  Component: c-slidebar
//
//  Used to display an app-style slide-in sidebar (a.k.a. slidebar)

//  vars
$at-slidebar-rgba:          rgb(0 0 0 / 20%);
$at-slidebar-animation:     cubic-bezier(0, 0, .3, 1);

//  component
.c-slidebar {
    position: fixed;
    z-index: $dp-z-fixed + 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    pointer-events: none;

    &__container {
        position: absolute;
        right: 0;
        width: 100%;
        max-width: 30%;
        background: $dp-color-white;
        height: 100%;
        transform: translateX(104%);
        display: flex;
        flex-direction: column;
        will-change: transform;
        pointer-events: all;
        box-shadow: $dp-box-shadow-xl;

        @include media-query('desk') {
            max-width: 35%;
        }

        @include media-query('lap') {
            max-width: 50%;
        }

        @include media-query('palm') {
            max-width: 90%;
            overflow: auto;
        }

        .is-animatable & {
            transition: transform .13s $at-slidebar-animation;
        }

        .is-visible.is-animatable & {
            transition: transform .33s $at-slidebar-animation;
        }

        .is-visible & {
            transform: none;
        }
    }

    &__scroll-container {
        overflow: auto;
    }

    &__content {
        max-width: 100%;
        height: calc(100% - 100px); // @TODO remove this magic number
    }

    &__toc-box {
        overflow-x: auto;
        max-height: 100%;
    }

    // Drag handle for resizing slidebar (reusing DpUnfoldToolbarControl component)
    // Adjust styles from _map.scss for the slidebar case
    .c-map__unfold-button {
        bottom: 50%;
        position: absolute;
        left: 0;
        z-index: 1;
        height: 40px;
        width: 30px;
        transform: translateX(-30px);
        cursor: grab;
        pointer-events: all;

        &-inner {
            height: 100%;
            width: 100%;
            padding: 8px 4px 8px 8px;
            background-color: $dp-color-white;
            border-radius: 2px 0 0 2px;
            box-shadow: -2px 3px 5px -2px $dp-color-neutral-light-1;
        }

        &-handle {
            position: absolute;

            height: 24px;
            width: 4px;

            border-left: 1px solid $dp-color-neutral-light-2;
            border-right: 1px solid $dp-color-neutral-light-2;
        }

        @include media-query('palm') {
            display: none;
        }
    }
}
